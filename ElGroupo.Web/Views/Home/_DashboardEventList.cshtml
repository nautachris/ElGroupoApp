@using ElGroupo.Web.Models.Events
@model IEnumerable<EventInformationModel>

@functions{
    private string GetCheckInUrl(long eid)
    {

        var url = Url.Action("CheckIn", "Events", new { eid = eid });
        return url;

    }
    private string GetEventViewUrl(long eid)
    {

        var url = Url.Action("View", "Events", new { eid = eid });
        return url;

    }
}
<ul style="list-style:none;">
    @foreach (var e in Model)
            {

        <li data-event-id="@e.Id">
            <div class="row" style="border:1px solid gray; border-radius:5px; margin:5px;">
                <div class="col span-7-of-8">
                    <div>
                        <span id="spanEventName" style="font-weight:bold; ">
                            <a href="@GetEventViewUrl(e.Id)">@e.Name</a>
                        </span>
                        @if (!e.OrganizedByUser)
                        {
                            <span>Organized by: @e.OrganizerName</span>
                        }
                        @if (e.IsRecurring)
                        {
                            <span>
                                @e.DateText | recurring
                            </span>

                        }
                        else
                        {
                            <span>
                                @e.DateText
                            </span>

                        }

                        @if (e.RSVPRequested)
                        {
                            <span>* RSVP Requested</span>

                        }
                        @*if the event does not require a rsvp, say "rsvp not required"*@
                        else if (e.CheckInStatus == ElGroupo.Domain.Enums.CheckInStatuses.AvailableForCheckIn && e.RSVPStatus != ElGroupo.Domain.Enums.RSVPTypes.None)
                        {
                            <a class="checkin-link" href="@GetCheckInUrl(e.Id)" style="background-color:red; color:white;">Check In Now!</a>

                        }
                        else if (e.CheckInStatus == ElGroupo.Domain.Enums.CheckInStatuses.CheckInSuccessful)
                        {
                            <div style="background-color:green; color:white;">You are checked in!</div>

                        }
                        else if (e.RSVPStatus == ElGroupo.Domain.Enums.RSVPTypes.None)
                        {
                            <div style="background-color:gray; color:white;">Response Pending</div>

                        }
                        else if (e.RSVPStatus == ElGroupo.Domain.Enums.RSVPTypes.Maybe)
                        {
                            <div style="background-color:yellow; color:black;">I might go</div>

                        }
                        else if (e.RSVPStatus == ElGroupo.Domain.Enums.RSVPTypes.No)
                        {
                            <div style="background-color:red; color:white;">Sorry, can't make it!</div>

                        }
                        else if (e.RSVPStatus == ElGroupo.Domain.Enums.RSVPTypes.Yes)
                        {
                            <div style="background-color:green; color:white;">Hell yeah I'm in!</div>

                        }
                        <div><span>Quick Response:</span><a style="padding-right:10px; cursor:pointer;">Yes</a><a style="padding-right:10px; cursor:pointer;">No</a></div>
                    </div>
                </div>
                <div class="col span-1-of-8">
                    @if (e.IsNew && !e.OrganizedByUser)
                    {
                        @: New
                    }
                    else if (e.OrganizedByUser)
                    {
                        @: My Event

                    }
                </div>
            </div>
        </li>
    }
</ul>