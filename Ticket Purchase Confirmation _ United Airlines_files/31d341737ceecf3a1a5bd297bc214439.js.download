Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){if(Bootstrapper.dataObject.page.pageType&&Bootstrapper.dataObject.page.pageType.toLowerCase()==="award"){var dataName="awardSearchDetail",awardSearchDetails=Bootstrapper.localS.utilities.__getData(dataName)||"";Bootstrapper.localS.utilities.__clearData(dataName);if(awardSearchDetails){var currDate=new Date,formattedDate=Bootstrapper._dateFormat(currDate,
"MM/dd/yyyy-HH:mm:ss"),detailsArr=awardSearchDetails.split("|");detailsArr[6]=formattedDate;awardSearchDetails=detailsArr.join("|");window.ga("send","event","Award Criteria","Award - Confirm","--",{"nonInteraction":1,"dimension73":awardSearchDetails})}}}if(Bootstrapper.dataObject&&Bootstrapper.dataObject.dataLayerLoaded)runDeployment();else $(window).on("dataLayerLoaded",function(){runDeployment()})},1222442,[2011281,1933905],357707,[248942,288194]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){if(Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType&&Bootstrapper.dataObject.page.pageType.toLowerCase()==="revenue"){var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={NZ:!0};if(posList[pos]){var value=Bootstrapper.dataObject.page.transaction.cost;var orderid=Bootstrapper.base64Encode(Bootstrapper.dataObject.page.transaction.PNR);
var prodid=Bootstrapper.dataObject.page.transaction.tripType;var prodinfo=Bootstrapper.dataObject.page.transaction.orig1+Bootstrapper.dataObject.page.transaction.dest1;var quantity=Bootstrapper.dataObject.page.transaction.qty;var currency=Bootstrapper.dataObject.page.transaction.currency;var url="//bs.serving-sys.com/Serving/ActivityServer.bs?cn\x3das\x26ActivityID\x3d821832\x26Value\x3d"+value+"\x26OrderID\x3d"+orderid+"\x26ProductID\x3d"+prodid+"\x26ProductInfo\x3d"+prodinfo+"\x26Quantity\x3d"+
quantity+"\x26Currency\x3d"+currency+"\x26ns\x3d1";Bootstrapper.imageRequest(url)}}}var loop=0;function jQueryflag(){if(loop<=30)setTimeout(function(){if(Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.transaction&&Bootstrapper.dataObject.page.transaction.PNR)runDeployment();else{loop=loop+1;jQueryflag()}},150);else return}jQueryflag()},1484894,396031);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){try{var currDate=new Date;var pos=Bootstrapper.dataObject.getData("POS","locale","global");var posList={CN:!0};if(posList[pos]){var ftURL="//bs.serving-sys.com/Serving/ActivityServer.bs?cn\x3das\x26ActivityID\x3d840997";var orderid=Bootstrapper.base64Encode(Bootstrapper.dataObject.page.transaction.PNR);var origin1=Bootstrapper.dataObject.getData("orig1",
"transaction","page");var origin2=Bootstrapper.dataObject.getData("orig2","transaction","page");var destination1=Bootstrapper.dataObject.getData("dest1","transaction","page");var destination2=Bootstrapper.dataObject.getData("dest2","transaction","page");var quantity=Bootstrapper.dataObject.getData("qty","transaction","page");var value=Bootstrapper.dataObject.getData("cost","transaction","page");var currency=Bootstrapper.dataObject.getData("currency","transaction","page");var traveldate1=Bootstrapper.dataObject.getData("travelDate1",
"transaction","page");var traveldate2=Bootstrapper.dataObject.getData("travelDate2","transaction","page");var classofservice1=Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSegments&&Bootstrapper.dataObject.page.flightSegments[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs&&Bootstrapper.dataObject.page.flightSegments[0].legs[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass?Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass:"";var classofservice2=
Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSegments&&Bootstrapper.dataObject.page.flightSegments[1]&&Bootstrapper.dataObject.page.flightSegments[1].legs&&Bootstrapper.dataObject.page.flightSegments[1].legs[0]&&Bootstrapper.dataObject.page.flightSegments[1].legs[0].serviceClass?Bootstrapper.dataObject.page.flightSegments[1].legs[0].serviceClass:"";var class_booked=Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSegments&&Bootstrapper.dataObject.page.flightSegments[0]&&
Bootstrapper.dataObject.page.flightSegments[0].legs&&Bootstrapper.dataObject.page.flightSegments[0].legs[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass?Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass:"";var pos1=Bootstrapper.dataObject.getData("POS","locale","global");var language=Bootstrapper.dataObject.getData("langCode","locale","global");var advancepurchase=Bootstrapper.dataObject.getData("advPurch","transaction","page");var totallegs=Bootstrapper.dataObject.getData("totalLegs",
"flightSegments","page");var dateofpurchase=Bootstrapper._dateFormat(currDate,"MM/dd/yyyy");var prodinfo=Bootstrapper.dataObject.page.transaction.orig1+Bootstrapper.dataObject.page.transaction.dest1;var prodid=Bootstrapper.dataObject.page.transaction.tripType;ftURL+="\x26Currency\x3d"+currency;ftURL+="\x26DateOfPurchase\x3d"+dateofpurchase;ftURL+="\x26TotalLegs\x3d"+totallegs;ftURL+="\x26AdvancePurchase\x3d"+advancepurchase;ftURL+="\x26ClassofService_1\x3d"+classofservice1;ftURL+="\x26ClassofService_2\x3d"+
classofservice2;ftURL+="\x26TravelDate_1\x3d"+traveldate1;ftURL+="\x26TravelDate_2\x3d"+traveldate2;ftURL+="\x26Origin_1\x3d"+origin1;ftURL+="\x26Origin_2\x3d"+origin2;ftURL+="\x26Destination_1\x3d"+destination1;ftURL+="\x26Destination_2\x3d"+destination2;ftURL+="\x26POS\x3d"+pos1;ftURL+="\x26language\x3d"+language;ftURL+="\x26Revenue\x3d"+value;ftURL+="\x26OrderID\x3d"+orderid;ftURL+="\x26ProductID\x3d"+prodid;ftURL+="\x26ProductInfo\x3d"+prodinfo;ftURL+="\x26Quantity\x3d"+quantity;Bootstrapper.imageRequest(ftURL)}}catch(e){var customLabel=
{"requirement":"Sizmek pixel tracking","tag_name":"Digital 2.0 Sizmek-CN-Confirmation Page","exception":"sizmek pixel: "+JSON.stringify(e.message),"input_source":{"url_encode":"ftURL"},"method_name":"runDeployment()"};Bootstrapper.dataObject.dataGapTracking("web",customLabel,e)}}if(Bootstrapper.dataObject&&Bootstrapper.dataObject.dataLayerLoaded)runDeployment();else $(window).on("dataLayerLoaded",function(){runDeployment()});if(Bootstrapper.dataObject&&Bootstrapper.dataObject.ajaxDatalayerLoaded)runDeployment();
else{var loop=0;function jQueryflag(){if(loop<=30)setTimeout(function(){if(typeof jQuery=="function"&&typeof $=="function"&&typeof $.prototype.on=="function")$(window).on("ajaxDatalayerLoaded",function(){runDeployment()});else{loop=loop+1;jQueryflag()}},150);else return}jQueryflag()}},1849231,396032);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var PARAM_KAYAKCLICKID="kayakclickid\x3d";var PARAM_RAND="\x26rand\x3d";var URL="https://www.kayak.com/s/kayakpixel/confirm/UA?";var KAYAK_WEB="kayak-web";var KAYAK_MOBILE="kayak-mobile";var KAYAK_FULL_WEBSITE_INTL="kayak-full website intl";var KAYAK_MOBILE_INTL="kayak-mobile intl";var TAG_NAME="Digital 2.0 - Kayak Pixel - Booking Confirmation Page";var GAP_REQUIREMENT=
"United Pixel Implementation:: KAYAK";var PARAM_ORIGIN="origin";var PARAM_DESTINATION="destination";var PARAM_DEPARTUREDATE="departing_date";var PARAM_CURRENCY="\x26currency\x3d";var CONST_DOUBLEDASH="--";var COSNT_ONEWAY="one way";trackingKayakPixel();function trackingKayakPixel(){var methodName="trackingKayakPixel";try{if(Bootstrapper&&Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.selectedTripsReferrer){var tripReferrer=Bootstrapper.dataObject.page.selectedTripsReferrer.toLowerCase();
var pageURL=document.location.href;var params=Bootstrapper.getParamsFromURL(pageURL);var rand=Bootstrapper.generateRandomNumberFromTimestamp();checkAndTriggerPixelForKayakUser(tripReferrer,params,rand)}}catch(e){dataGapTracking("Bootstrapper.dataObject",e,e,methodName)}}function checkAndTriggerPixelForKayakUser(tripReferrer,params,rand){if(tripReferrer===KAYAK_WEB||tripReferrer===KAYAK_MOBILE||tripReferrer===KAYAK_FULL_WEBSITE_INTL||tripReferrer===KAYAK_MOBILE_INTL)triggerKayakPixel(params,rand)}
function triggerKayakPixel(params,rand){var methodName="triggerKayakPixel";try{if(params&&params.CartId&&rand){var getData=Bootstrapper.dataObject._getData;var transCurrency=getData.call(window,"currency","transaction","page");var tripType=getData.call(window,"tripType","flightSearch","page");var dataObj=getODPairnDepartureDate(tripType);var urlData=prepareURL(dataObj);var imageURL=URL+PARAM_KAYAKCLICKID+params.CartId+urlData+PARAM_CURRENCY+transCurrency+PARAM_RAND+rand;Bootstrapper.imageRequest(imageURL)}else{var errorlog=
{"message":"CartId not found for the required parameters, params:"};dataGapTracking(Bootstrapper.dataObject.global.constant.pageURL,document.location.pathname,errorlog,methodName)}}catch(e){var errorlog=e;dataGapTracking(Bootstrapper.dataObject.global.constant.pageURL,document.location.pathname,errorlog,methodName)}}function dataGapTracking(ds,inpVal,errorLog,methodName){var dataSource="data_source";var inputValue="input_value";var inputSource={dataSource:ds,inputValue:inpVal};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(GAP_REQUIREMENT,
TAG_NAME,errorLog,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,errorLog)}function getODPairnDepartureDate(tripType){var methodName="getODPairnDepartureDate";var tripType=tripType||COSNT_ONEWAY;var retData={"Origin":[],"Destination":[],"DepartDate":[]};try{if(Bootstrapper&&Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.selectedTrips){var selectedTrips=Bootstrapper.dataObject.page.selectedTrips;
var tripLength=selectedTrips.length;var i=0;for(i;i<tripLength;i++){selectedTrips[i].Flights[0].Origin?retData.Origin.push(selectedTrips[i].Flights[0].Origin):retData.Origin.push(CONST_DOUBLEDASH);selectedTrips[i].Flights[0].DepartDate?retData.DepartDate.push(Bootstrapper.formatDate(new Date(selectedTrips[i].Flights[0].DepartDate))):retData.Origin.push(CONST_DOUBLEDASH);if(selectedTrips[i].Flights[0].Connections){var conArrLength=selectedTrips[i].Flights[0].Connections.length;selectedTrips[i].Flights[0].Connections[conArrLength-
1].Destination?retData.Destination.push(selectedTrips[i].Flights[0].Connections[conArrLength-1].Destination):retData.Origin.push(CONST_DOUBLEDASH)}else selectedTrips[i].Flights[0].Destination?retData.Destination.push(selectedTrips[i].Flights[0].Destination):retData.Origin.push(CONST_DOUBLEDASH)}}}catch(e){dataGapTracking("Bootstrapper.dataObject","Undefined",e,methodName)}return retData}function prepareURL(dataObj){var methodName="prepareURL";var retURL="";try{if(dataObj&&dataObj.Origin){var i=0;
for(i;i<dataObj.Origin.length;i++){retURL+="\x26"+PARAM_ORIGIN+(i+1)+"\x3d"+dataObj.Origin[i];retURL+="\x26"+PARAM_DESTINATION+(i+1)+"\x3d"+dataObj.Destination[i];retURL+="\x26"+PARAM_DEPARTUREDATE+(i+1)+"\x3d"+dataObj.DepartDate[i]}}}catch(e){dataGapTracking("OD pair data","Undefined",e,methodName)}return retURL}},2321695,[2011281,2203007],475765,[248942,269644]);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var tagName="Digital 2.0 - Adara - Award Flight Confirmation";function runDeployment(){if(Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType&&Bootstrapper.dataObject.page.pageType.toLowerCase()==="award"){var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={US:!0,CA:!0,JP:!0,CN:!0,IN:!0,PH:!0,GU:!0,
TW:!0,NZ:!0,MP:!0,AU:!0,MX:!0,BR:!0,PA:!0,PR:!0,PE:!0,GT:!0,EC:!0,CL:!0,GB:!0};if(posList[pos])try{var aBaseURL=Bootstrapper.dataObject.getData("jsReqBaseURL","adara","global"),segments=Bootstrapper.dataObject.page.flightSegments,oac=segments[0].origAirport,dac=segments[0].destAirport,ddate=segments[0].flightDate,rdate=segments[1]?segments[1].flightDate:"",cc=segments[0].legs[0].serviceClass,recc=segments[1]?segments[1].legs[0].serviceClass:"",trls=Bootstrapper.dataObject.page.transaction.qty;function sendAdaraCall(clientId){var customerId=
Bootstrapper.dataObject.getData("CustomerId","visitor","global")!=="--"?Bootstrapper.dataObject.getData("CustomerId","visitor","global"):clientId;var aParams="";var ecoPlus=getEcoPlus();if(customerId)aParams+="\x26u\x3d"+customerId;aParams+="\x26oac\x3d"+oac+"\x26dac\x3d"+dac+"\x26ddate\x3d"+ddate+"\x26rdate\x3d"+rdate+"\x26cc\x3d"+cc+"\x26recc\x3d"+recc+"\x26trls\x3d"+trls+"pg\x3dbk";aParams+="\x26econplus\x3d"+ecoPlus;var aReqURL=aBaseURL+aParams;Bootstrapper.safeInsertIframe(aReqURL)}Bootstrapper.getTrackerValueOf(Bootstrapper.dataObject.global.constant.adara.clientId,
sendAdaraCall)}catch(e){var gapRequirment="Adara call on confirmation page - Award";customGaptrackingCall("Bootstrapper.dataObject.page.flightSegments","undefined","runDeployment",e,gapRequirment)}}}if(Bootstrapper.dataObject&&Bootstrapper.dataObject.dataLayerLoaded)runDeployment();else $(window).on("dataLayerLoaded",function(){runDeployment()});function getEcoPlus(){var econPlus="N";var parentDOMEle="#enrollProfileForm .table-travelers";var seatPrivilageCls=".traveler-seat-privilages";var methodName=
"getEcoPlus";try{$(parentDOMEle).each(function(index,obj){if($(obj).find(seatPrivilageCls)&&$(obj).find(seatPrivilageCls).html()&&$(obj).find(seatPrivilageCls).html().indexOf("Economy Plus")>-1)econPlus="Y"})}catch(e){var gapRequirment="Adara call on confirmation page with Economy Plus value";customGaptrackingCall(parentDOMEle,"undefined",methodName,e,gapRequirment)}return econPlus}function customGaptrackingCall(dataSource,inputValue,methodName,e,gapRequirment){var inputSource={"data_source":dataSource,
"input_value":inputValue};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(gapRequirment,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e)}},2260703,[2011281],260266,[248942]);
Bootstrapper.bindDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){var pos=Bootstrapper.dataObject.getData("POS","locale","global");var posList={US:!0,AU:!0,GB:!0,NZ:!0,CN:!0};if(posList[pos]){var ftURL="https://servedby.flashtalking.com/spot/8/8177;60494;6323/?spotName\x3dUnited_Airlines_Thank_You";var trans_id=Bootstrapper.base64Encode(Bootstrapper.dataObject.page.transaction.PNR);var origin_airport=Bootstrapper.dataObject.getData("orig1",
"transaction","page");var destination_airport=Bootstrapper.dataObject.getData("dest1","transaction","page");var num_travelers=Bootstrapper.dataObject.getData("qty","transaction","page");var value=Bootstrapper.dataObject.getData("cost","transaction","page");var currency=Bootstrapper.dataObject.getData("currency","transaction","page");var travel_date=Bootstrapper.dataObject.getData("travelDate1","transaction","page");var return_date=Bootstrapper.dataObject.getData("travelDate2","transaction","page");
var class_booked=Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSegments&&Bootstrapper.dataObject.page.flightSegments[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs&&Bootstrapper.dataObject.page.flightSegments[0].legs[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass?Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass:"";var country_code=Bootstrapper.dataObject.getData("POS","locale","global");ftURL+="\x26ftXRef\x3d"+trans_id;ftURL+=
"\x26ftXNumItems\x3d"+num_travelers;ftURL+="\x26ftXCurrency\x3d"+currency;ftURL+="\x26U1\x3d"+origin_airport;ftURL+="\x26U2\x3d"+destination_airport;ftURL+="\x26ftXValue\x3d"+value;ftURL+="\x26U3\x3d"+travel_date;ftURL+="\x26U4\x3d"+return_date;ftURL+="\x26U5\x3d"+class_booked;ftURL+="\x26U6\x3d"+country_code;Bootstrapper.imageRequest(ftURL)}}if(Bootstrapper.dataObject&&Bootstrapper.dataObject.dataLayerLoaded)runDeployment();else $(window).on("dataLayerLoaded",function(){runDeployment()});if(Bootstrapper.dataObject&&
Bootstrapper.dataObject.ajaxDatalayerLoaded)runDeployment();else{var loop=0;function jQueryflag(){if(loop<=30)setTimeout(function(){if(typeof jQuery=="function"&&typeof $=="function"&&typeof $.prototype.on=="function")$(window).on("ajaxDatalayerLoaded",function(){runDeployment()});else{loop=loop+1;jQueryflag()}},150);else return}jQueryflag()}},1883854,438934);
Bootstrapper.bindDependencyDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={US:!0,GB:!0,JP:!0,AU:!0};if(posList[pos]){var content_type=JSON.stringify(["flight","hotel"]),origin_airport=Bootstrapper.dataObject.getData("orig1","transaction","page"),destination_airport=Bootstrapper.dataObject.getData("dest1","transaction","page"),departing_departure_date=
Bootstrapper.dataObject.getData("travelDate1","transaction","page"),content_id=origin_airport+"-"+destination_airport+"-"+departing_departure_date,returning_departure_date=Bootstrapper.dataObject.getData("travelDate2","transaction","page"),num_travelers=Bootstrapper.dataObject.getData("qty","transaction","page"),loyalty_tier=Bootstrapper.getMPAccStatusValue(),travel_class=Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSegments&&Bootstrapper.dataObject.page.flightSegments[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs&&
Bootstrapper.dataObject.page.flightSegments[0].legs[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass?Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass:"",value=Bootstrapper.dataObject.getData("cost","transaction","page"),purchase_price=Bootstrapper.dataObject.getData("cost","transaction","page"),currency=Bootstrapper.dataObject.getData("currency","transaction","page");travel_class=travel_class.indexOf(["econ","Coach"])>-1?"Economy":travel_class;pos=Bootstrapper.dataObject.getData("POS",
"locale","global");var src="//www.facebook.com/tr?id\x3d1245757155444013\x26ev\x3dPurchase";src+="\x26cd[content_type]\x3d"+content_type;src+="\x26cd[content_ids]\x3d"+content_id;src+="\x26cd[origin_airport]\x3d"+origin_airport;src+="\x26cd[destination_airport]\x3d"+destination_airport;src+="\x26cd[departing_departure_date]\x3d"+departing_departure_date;src+="\x26cd[returning_departure_date]\x3d"+returning_departure_date;src+="\x26cd[num_travelers]\x3d"+num_travelers;src+="\x26cd[loyalty_tier]\x3d"+
loyalty_tier;src+="\x26cd[travel_class]\x3d"+travel_class;src+="\x26cd[value]\x3d"+value;src+="\x26cd[purchase_price]\x3d"+purchase_price;src+="\x26cd[currency]\x3d"+currency;src+="\x26cd[pos]\x3d"+pos;src+="\x26cd[destination_ids]\x3d"+destination_airport;Bootstrapper.imageRequest(src)}}var loop=0;function jQueryflag(){if(loop<=30)setTimeout(function(){if(Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSearch&&Bootstrapper.dataObject.page.flightSearch.orig1!=="--")runDeployment();
else{loop=loop+1;jQueryflag()}},350);else return}jQueryflag()},2089735,[2011281],396513,[248942]);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var flexdata=JSON.parse(document.cookie.substr(document.cookie.indexOf("SearchInput")).split(";")[0].split("\x3d")[1]);var checkDateInput=true;function runPersonalization(){try{var userAction="Recent Searches";var expirationDays=7;var GAService=function(payload,userAction){var recSrc=JSON.stringify(payload);ga("send","event",{"eventCategory":"Recent Searches and Bookings",
"eventAction":userAction,"eventLabel":recSrc});Bootstrapper.localS.utilities.__setData("rctSrch","["+recSrc+"]",(new Date).getTime()+1E3*60*60*24*expirationDays)};function formatDate(date){var d=new Date(date.replace(/-/g,"/")),month=""+(d.getMonth()+1),day=""+d.getDate(),year=d.getFullYear();if(flexdata.isFlexible)day="1";if(month.length<2)month="0"+month;if(day.length<2)day="0"+day;return[year,month,day].join("-")}function changeDateformat(date){var d=new Date(date.replace(/-/g,"/")),month=""+(d.getMonth()+
1),day=""+d.getDate(),year=d.getFullYear();if(month.length<2)month="0"+month;if(day.length<2)day="0"+day;return[year,month,day].join("-")}function getReturnDate(){var returnDate;try{if(UA.AppData.Data.Search.SearchMethod.toLowerCase()=="roundtrip"){returnDate=UA.AppData.Data.Search.ReturnDate;returnDate=changeDateformat(returnDate)}else returnDate="--"}catch(e){returnDate="-"}return returnDate}var defaultBookingflag=false;if(Bootstrapper.dataObject.page.pageURI.indexOf("book-a-flight/confirmation")>
-1){defaultBookingflag=true;userAction="Recent Bookings"}var lowestPrice="--";try{lowestPrice=Bootstrapper.dataObject.page.flightSearch.lowestFarePrice}catch(e){var customLabel={"requirement":"Personalization lowest fare price on session storage","tag_name":"Digital 2.0 - Store Recent Searches and Booking with Flexi Data","exception":"lowest fare price:"+JSON.stringify(e.message),"input_source":{"lowest_price":{"type":"Bootstrapper","value":"Bootstrapper.dataObject.page.flightSearch.lowestFarePrice"}},
"method_name":"runPersonalization"};Bootstrapper.dataObject.dataGapTracking("web",customLabel,e)}if(flexdata.isFlexible){var newData={fd:true,b:defaultBookingflag,s:Bootstrapper._serverTime.substring(0,11).trim(),tt:_.capitalize(Bootstrapper.dataObject.page.flightSearch.type),tm:_.capitalize(Bootstrapper.dataObject.page.flightSearch.tripModel),lp:lowestPrice};if(Bootstrapper.dataObject.page.flightSearch.tripType==="--"){newData.o=flexdata.Origin;newData.d=flexdata.Destination;var getDate=function(){if($("#modify-calendar").length>=
1)myDate=$('[name\x3d"FlexMonth"]').val();else myDate=$("#calender-dropdown").val();if(_.isUndefined(myDate))setTimeout(getDate,1E3);else{myDate=formatDate(myDate);newData.dd=myDate;newData.rd=getReturnDate();GAService(newData,userAction)}}()}else{newData.o=Bootstrapper.dataObject.page.flightSearch.orig1;newData.d=Bootstrapper.dataObject.page.flightSearch.dest1;newData.dd=formatDate(Bootstrapper.dataObject.page.flightSearch.travelDate1);newData.rd=getReturnDate();GAService(newData,userAction)}}else{var newData=
{o:Bootstrapper.dataObject.page.flightSearch.orig1,fd:false,d:Bootstrapper.dataObject.page.flightSearch.dest1,dd:formatDate(Bootstrapper.dataObject.page.flightSearch.travelDate1),b:defaultBookingflag,s:Bootstrapper._serverTime.substring(0,11).trim(),tt:_.capitalize(Bootstrapper.dataObject.page.flightSearch.type),tm:_.capitalize(Bootstrapper.dataObject.page.flightSearch.tripModel),rd:getReturnDate(),lp:lowestPrice};GAService(newData,userAction)}}catch(e){}}try{if(Bootstrapper.dataObject.page.pageURI.indexOf("book-a-flight/confirmation")>
-1)runPersonalization();else $(window).on("dataLayerLoaded",function(){runPersonalization()});if(flexdata.isFlexible&&$("#modify-calendar").length>=1&&$('[name\x3d"FlexMonth"]').val()){checkDateInput=false;runPersonalization()}else if(flexdata.isFlexible&&$("#cal-container").length>=1&&$("#calender-dropdown").val()){checkDateInput=false;runPersonalization()}else var winterval=window.setInterval(function(){if(flexdata.isFlexible&&$("#modify-calendar").length>=1&&checkDateInput){clearInterval(winterval);
checkDateInput=false;runPersonalization()}else if(flexdata.isFlexible&&$("#cal-container").length>=1&&checkDateInput){clearInterval(winterval);checkDateInput=false;runPersonalization()}},1E3)}catch(e){}},1884650,[2011281,1933905],430258,[248942,288194]);Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions},1429803,[2011281],272368,[248942]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={US:!0};if(posList[pos]){var twImgSrc="https://analytics.twitter.com/i/adsct?txn_id\x3dnvn3k\x26p_id\x3dTwitter";twImgSrc+="\x26tw_sale_amount\x3d"+Bootstrapper.dataObject.getData("cost","transaction","page");twImgSrc+="\x26tw_order_quantity\x3d"+Bootstrapper.dataObject.getData("qty","transaction",
"page");Bootstrapper.imageRequest(twImgSrc)}},1665636,438447);
Bootstrapper.bindDependencyDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={US:!0,CA:!0,JP:!0,IN:!0,PH:!0,GU:!0,TW:!0,MP:!0,MX:!0,BR:!0,PA:!0,PR:!0,PE:!0,GT:!0,EC:!0,CL:!0,GB:!0,AU:!0};if(posList[pos])try{var currDate=new Date,url="https://3463749.fls.doubleclick.net/activityi;src\x3d3463749;type\x3dticke498;cat\x3dunite820";url+=";qty\x3d"+Bootstrapper.dataObject.getData("qty",
"transaction","page");url+=";cost\x3d"+Bootstrapper.dataObject.getData("cost","transaction","page");url+=";u7\x3d"+Bootstrapper.dataObject.getData("dest1","transaction","page");url+=";u8\x3d"+Bootstrapper.dataObject.getData("dest2","transaction","page");url+=";u9\x3d"+Bootstrapper.dataObject.getData("travelDate1","transaction","page");url+=";u10\x3d"+Bootstrapper.dataObject.getData("travelDate2","transaction","page");url+=";u3\x3d"+Bootstrapper.dataObject.getData("currency","transaction","page");
url+=";u4\x3d"+Bootstrapper.dataObject.getData("offerCode","transaction","page");url+=";u5\x3d"+Bootstrapper.dataObject.getData("orig1","transaction","page");url+=";u6\x3d"+Bootstrapper.dataObject.getData("orig2","transaction","page");url+=";u1\x3d"+Bootstrapper.dataObject.getData("langCode","locale","global");url+=";u2\x3d"+Bootstrapper.dataObject.getData("POS","locale","global");url+=";u16\x3d"+Bootstrapper.dataObject.getData("qty","transaction","page");url+=";u15\x3d";url+=";u18\x3d"+(Bootstrapper.base64Encode!==
undefined?Bootstrapper.base64Encode(Bootstrapper.dataObject.getData("PNR","transaction","page")):"--");url+=";u19\x3d";url+=";u17\x3d"+Bootstrapper.dataObject.getData("cost","transaction","page");url+=";u12\x3d"+(Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSegments&&Bootstrapper.dataObject.page.flightSegments[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs&&Bootstrapper.dataObject.page.flightSegments[0].legs[0]&&Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass?
Bootstrapper.dataObject.page.flightSegments[0].legs[0].serviceClass:"");url+=";u11\x3d"+(Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSegments&&Bootstrapper.dataObject.page.flightSegments[1]&&Bootstrapper.dataObject.page.flightSegments[1].legs&&Bootstrapper.dataObject.page.flightSegments[1].legs[0]&&Bootstrapper.dataObject.page.flightSegments[1].legs[0].serviceClass?Bootstrapper.dataObject.page.flightSegments[1].legs[0].serviceClass:"");url+=";u14\x3d"+Bootstrapper.dataObject.getData("totalLegs",
"flightSegments","page");url+=";u13\x3d"+Bootstrapper.dataObject.getData("advPurch","transaction","page");url+=";u20\x3d"+Bootstrapper._dateFormat(currDate,"MM/dd/yyyy");url+=";ord\x3d"+(Bootstrapper.transData&&Bootstrapper.transData.ordID?Bootstrapper.transData.ordID:"");url+="?";var newNode=document.createElement("iframe");newNode.style.display="none";newNode.src=url;Bootstrapper.bindDOMParsed(function(n){return function(){document.body.appendChild(n)}}(newNode));Bootstrapper.bindDOMLoaded(function(u){var urlParams=
u.substring(u.indexOf(";qty\x3d")+1,u.length-1).split(";"),cost=Bootstrapper.dataObject.getData("cost","transaction","page"),currency=Bootstrapper.dataObject.getData("currency","transaction","page");urlParams.push("scrapedCost\x3d"+encodeURIComponent(cost||"Unknown"));urlParams.push("scrapedCurrency\x3d"+encodeURIComponent(currency=currency==="$"?"USD":currency||"Unknown"));urlParams.push("scrapedPOS\x3d"+(Bootstrapper.dataObject.getData("POS","locale","global")||"Unknown"));window._gaq=window._gaq||
[];ga("send","event","Floodlight","confirmation",urlParams.join(";"),{"nonInteraction":1})}(url))}catch(e){}},1649734,[2011281],202629,[248942]);
Bootstrapper.bindDependencyDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function responsysV6Conf(){if(Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSearch&&Bootstrapper.dataObject.page.transaction){if(Bootstrapper.dataObject.getData("POS","locale","global")==="US"){var OrderID=encodeURIComponent(Bootstrapper.base64Encode(Bootstrapper.dataObject._getData("PNR","transaction","page"))),OrderTotal=
encodeURIComponent(Bootstrapper.dataObject.getData("cost","transaction","page")),NumItem=encodeURIComponent(Bootstrapper.dataObject.getData("qty","transaction","page")),Onepass_Number=encodeURIComponent(Bootstrapper.base64Encode(Bootstrapper.dataObject.getData("CustomerId","visitor","global"))),ORIG_AIRPORT_CODE=encodeURIComponent(Bootstrapper.dataObject.getData("orig1","flightSearch","page")),DEST_AIRPORT_CODE=encodeURIComponent(Bootstrapper.dataObject.getData("dest1","flightSearch","page")),DEPARTURE_DATE=
encodeURIComponent(Bootstrapper.dataObject.getData("travelDate1ISO","flightSearch","page")),RETURN_DATE=encodeURIComponent(Bootstrapper.dataObject.getData("travelDate2ISO","flightSearch","page")),PRODUCT_CODE="FLT",ATTRIB_TYPE="",DEST_CITY_NAME="",ORIG_CITY_NAME="",sif_protocol="https://",sif_domain="news.united.com",sif_pathname="/pub/cct",sif_search="?_ri_\x3dX0Gzc2X%3DWQpglLjHJlTQGgKA1dLbzcsLpqTKzc7AdDdd6\x26_ei_\x3dEkUTl7g3S2vHWRbQHGae3mE\x26action\x3donce\x26OrderID\x3d"+OrderID+"\x26OrderTotal\x3d"+
OrderTotal+"\x26NumItems\x3d"+NumItem+"\x26Onepass_Number\x3d"+Onepass_Number+"\x26ORIG_AIRPORT_CODE\x3d"+ORIG_AIRPORT_CODE+"\x26ORIG_CITY_NAME ORIG\x3d"+ORIG_CITY_NAME+"\x26DEST_AIRPORT_CODE\x3d"+DEST_AIRPORT_CODE+"\x26DEST_CITY_NAME\x3d"+DEST_CITY_NAME+"\x26DEPARTURE_DATE\x3d"+DEPARTURE_DATE+"\x26RETURN_DATE\x3d"+RETURN_DATE+"\x26PRODUCT_CODE\x3d"+PRODUCT_CODE+"\x26ATTRIB_TYPE\x3d"+ATTRIB_TYPE;Bootstrapper.safeInsertIframe(sif_protocol+sif_domain+sif_pathname+sif_search)}}else setTimeout(responsysV6Conf,
500)}responsysV6Conf()},1419334,[2011281],252642,[248942]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){if(Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType&&Bootstrapper.dataObject.page.pageType.toLowerCase()==="revenue"){var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={AU:!0};if(posList[pos]){var value=Bootstrapper.dataObject.page.transaction.cost;var orderid=Bootstrapper.base64Encode(Bootstrapper.dataObject.page.transaction.PNR);
var prodid=Bootstrapper.dataObject.page.transaction.tripType;var prodinfo=Bootstrapper.dataObject.page.transaction.orig1+Bootstrapper.dataObject.page.transaction.dest1;var quantity=Bootstrapper.dataObject.page.transaction.qty;var currency=Bootstrapper.dataObject.page.transaction.currency;var rand=Math.floor(Math.random()*1E10);var url="//bs.serving-sys.com/Serving/ActivityServer.bs?cn\x3das\x26ActivityID\x3d822260\x26Value\x3d"+value+"\x26OrderID\x3d"+orderid+"\x26ProductID\x3d"+prodid+"\x26ProductInfo\x3d"+
prodinfo+"\x26Quantity\x3d"+quantity+"\x26Currency\x3d"+currency+"\x26ns\x3d1"+"\x26src.rand\x3d"+rand;Bootstrapper.imageRequest(url)}}}var loop=0;function jQueryflag(){if(loop<=30)setTimeout(function(){if(Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.transaction&&Bootstrapper.dataObject.page.transaction.PNR)runDeployment();else{loop=loop+1;jQueryflag()}},150);else return}jQueryflag()},1484891,396030);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var tagName="Digital 2.0 - Adara - Confirmation Page";function runDeployment(){if(Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType&&Bootstrapper.dataObject.page.pageType.toLowerCase()==="revenue"){var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={US:!0,CA:!0,JP:!0,CN:!0,IN:!0,PH:!0,GU:!0,TW:!0,
NZ:!0,MP:!0,AU:!0,MX:!0,BR:!0,PA:!0,PR:!0,PE:!0,GT:!0,EC:!0,CL:!0,GB:!0};if(posList[pos])try{var aBaseURL=Bootstrapper.dataObject.getData("jsReqBaseURL","adara","global"),segments=Bootstrapper.dataObject.page.flightSegments,lang=Bootstrapper.dataObject.getData("langCode","locale","global"),paxCount=Bootstrapper.dataObject.getData("paxCount","flightSearch","page"),customerId=Bootstrapper.dataObject.getData("CustomerId","visitor","global")!=="--"?Bootstrapper.dataObject.getData("CustomerId","visitor",
"global"):"",sCount=segments.length,finalDestSegment,returnSegment,fs;if(customerId==="")if(Bootstrapper.localS&&Bootstrapper.localS.utilities&&Bootstrapper.localS.utilities.hasOwnProperty("__getData")&&Bootstrapper.localS.utilities.__getData("retarget-payment")){var rePayString=Bootstrapper.localS.utilities.__getData("retarget-payment"),rePaySplit=rePayString.split("|"),rePayCust=rePaySplit[1];if(rePayCust!=="--")customerId=rePayCust}if(sCount>1&&segments[0].origAirport===segments[sCount-1].destAirport){finalDestSegment=
segments[sCount-2];returnSegment=segments[sCount-1];fs=sCount-2}else{finalDestSegment=segments[sCount-1];fs=sCount-1}var fareCost=Bootstrapper.dataObject.getData("cost","transaction","page");if(fareCost&&!isNaN(fareCost))fareCost=Math.floor(fareCost);else fareCost=0;var origAC=segments[0].legs[0].origAirport,destAC=finalDestSegment.legs[finalDestSegment.legs.length-1].destAirport,departDate=segments[0].legs[0].flightdateISO,departingFlight=segments[0].legs[0].flight,departingFlightAircraft=segments[0].legs[0].aircraft,
returnDate="",returnTime="",returnFlight="",returnFlightAircraft="";if(returnSegment){returnDate=returnSegment.legs[0].flightdateISO;returnTime=returnSegment.legs[0].departureTime;returnFlight=returnSegment.legs[0].flight;returnFlightAircraft=returnSegment.legs[0].aircraft}var aircrafts=[],fareClasses=[],flightNumbers=[],serviceClasses=[],flightMileage=[],flightDurations=[];for(var j=0;segments.length>j;j++)for(var i=0;segments[j].legs.length>i;i++){aircrafts.push(segments[j].legs[i].aircraft);fareClasses.push(segments[j].legs[i].fareClass);
flightNumbers.push(segments[j].legs[i].flight);serviceClasses.push(segments[j].legs[i].serviceClass);flightMileage.push(segments[j].legs[i].miles);flightDurations.push(segments[j].legs[i].duration)}function sendAdaraCall(clientId){customerId=customerId!==""?customerId:clientId;var aParams="";var ecoPlus=getEcoPlus();if(customerId)aParams+="\x26u\x3d"+customerId;aParams+="\x26oac\x3d"+origAC+"\x26dac\x3d"+destAC+"\x26ddate\x3d"+departDate+"\x26rdate\x3d"+returnDate+"\x26cc\x3d\x26recc\x3d\x26trls\x3d"+
paxCount+"\x26ttl\x3d\x26ccd\x3d\x26fmlg\x3d"+flightMileage[0]+"\x26fldu\x3d"+flightDurations[0]+"\x26eqtc\x3d\x26fcs\x3d"+fareClasses[0]+"\x26ccps\x3d\x26lang\x3d"+lang+"\x26ctry\x3d"+pos+"\x26dflnb\x3d"+departingFlight+"\x26rflnb\x3d"+returnFlight+"\x26datyp\x3d"+departingFlightAircraft+"\x26ratyp\x3d"+returnFlightAircraft+"\x26pg\x3dbk";aParams+="\x26econplus\x3d"+ecoPlus;var aReqURL=aBaseURL+aParams;Bootstrapper.safeInsertIframe(aReqURL)}Bootstrapper.getTrackerValueOf(Bootstrapper.dataObject.global.constant.adara.clientId,
sendAdaraCall)}catch(e){var gapRequirment="Adara call on confirmation page";customGaptrackingCall("Bootstrapper.dataObject","undefined","runDeployment",e,gapRequirment)}}}if(Bootstrapper.dataObject&&Bootstrapper.dataObject.dataLayerLoaded)runDeployment();else $(window).on("dataLayerLoaded",function(){runDeployment()});function getEcoPlus(){var econPlus="N";var parentDOMEle="#enrollProfileForm .table-travelers";var seatPrivilageCls=".traveler-seat-privilages";var methodName="getEcoPlus";try{$(parentDOMEle).each(function(index,
obj){if($(obj).find(seatPrivilageCls)&&$(obj).find(seatPrivilageCls).html()&&$(obj).find(seatPrivilageCls).html().indexOf("Economy Plus")>-1)econPlus="Y"})}catch(e){var gapRequirment="Adara call on confirmation page with Economy Plus value";customGaptrackingCall(parentDOMEle,"undefined",methodName,e,gapRequirment)}return econPlus}function customGaptrackingCall(dataSource,inputValue,methodName,e,gapRequirment){var inputSource={"data_source":dataSource,"input_value":inputValue};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(gapRequirment,
tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e)}},2260694,[2011281],202709,[248942]);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var sojernPixelonConfirmation={CONST_TAGNAME:"Digital 2.0 - Sojern Pixel - Booking Confirmation Page",CONST_REQ:"Send Sojern Pixel call on Booking Confirmation Page",CONST_origin:"Origin",CONST_destination:"Destination",CONST_undefined:"undefined",CONST_page:"page",CONST_transaction:"transaction",sendsojernPixel:function(){var methodName="sendsojernPixel";var routeDetail;
var pixelURL="https://pixel.sojern.com/pixel/img/80567?p_v\x3d1\x26f_v\x3dv3_image\x26vid\x3dair";try{var UAData=UA&&UA.AppData&&UA.AppData.Data?UA.AppData.Data:"";var searchData=UAData&&UAData.Search?UAData.Search:"";var tripsData=UAData&&UAData.Selected&&UAData.Selected.Trips?UAData.Selected.Trips:"";var cartData=UAData&&UAData.Cart?UAData.Cart:"";var getData=Bootstrapper.dataObject._getData;routeDetail=sojernPixelonConfirmation.getRouteCityCountry();pixelURL+="\x26fd1\x3d"+(searchData&&searchData.DepartDate?
Bootstrapper.formatDateISO(new Date(searchData.DepartDate)):"--");pixelURL+="\x26fd2\x3d"+(searchData&&searchData.ReturnDate?Bootstrapper.formatDateISO(new Date(searchData.ReturnDate)):"--");pixelURL+="\x26fa1\x3d"+sojernPixelonConfirmation.getODName(tripsData,sojernPixelonConfirmation.CONST_origin);pixelURL+="\x26fn2\x3d"+routeDetail.origin.country;pixelURL+="\x26fa2\x3d"+sojernPixelonConfirmation.getODName(tripsData,sojernPixelonConfirmation.CONST_destination);pixelURL+="\x26fn1\x3d"+routeDetail.destination.country;
pixelURL+="\x26fc\x3d"+(cartData&&cartData.Products&&cartData.Products[0].ProductType?cartData.Products[0].ProductType.toLowerCase():"--");pixelURL+="\x26fp\x3d"+getData.call(window,"cost",sojernPixelonConfirmation.CONST_transaction,sojernPixelonConfirmation.CONST_page);pixelURL+="\x26fcu\x3d"+getData.call(window,"currency",sojernPixelonConfirmation.CONST_transaction,sojernPixelonConfirmation.CONST_page);pixelURL+="\x26fconfno\x3d"+getData.call(window,"PNR",sojernPixelonConfirmation.CONST_transaction,
sojernPixelonConfirmation.CONST_page);Bootstrapper.imageRequest(pixelURL)}catch(error){var dataSource="Trips data";sojernPixelonConfirmation.customGaptrackingCall(error,dataSource,sojernPixelonConfirmation.CONST_undefined,methodName)}},getODName:function(dataObj,key){var methodName="getODName";var retVal="--";try{if(dataObj.length>0&&dataObj[0][key])retVal=dataObj[0][key]}catch(error){var dataSource="Trips data";sojernPixelonConfirmation.customGaptrackingCall(error,dataSource,sojernPixelonConfirmation.CONST_undefined,
methodName)}return retVal},getRouteCityCountry:function(){var methodName="getRouteCityCountry";var routeData={};try{if(UA&&UA.AppData&&UA.AppData.Data&&UA.AppData.Data.Search){routeData["origin"]=Bootstrapper.decodedODData(UA.AppData.Data.Search.Origin);routeData["destination"]=Bootstrapper.decodedODData(UA.AppData.Data.Search.Destination)}}catch(error){var dataSource="UA.AppData.Data.Search";sojernPixelonConfirmation.customGaptrackingCall(error,dataSource,sojernPixelonConfirmation.CONST_undefined,
methodName)}return routeData},customGaptrackingCall:function(errorLog,dataSource,inputValue,methodName){var inputSource={dataSource:dataSource,inputValue:inputValue};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(sojernPixelonFSR.CONST_REQ,sojernPixelonFSR.CONST_TAGNAME,errorLog,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,errorLog)}};if(Bootstrapper.dataObject&&Bootstrapper.dataObject.dataLayerLoaded)sojernPixelonConfirmation.sendsojernPixel();
else $(window).on("dataLayerLoaded",function(){sojernPixelonConfirmation.sendsojernPixel()})},2202987,[2011281,1933905],506836,[248942,288194]);
Bootstrapper.bindDependencyDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var USA_LANGUAGE_VERSIONS=["US","EE. UU.","EUA"];var LOCAL_VARIABLES={DOMESTIC:"Domestic",INTERNATIONAL:"International"};function runDeployment(){try{ga("require","ec");window._pEventLabelData="";var action="purchase";var tranxData={};var segmentCarriers=[];var transData=Bootstrapper.dataObject.page.transaction;var productsArray=Bootstrapper.dataObject.page.productsInCart.filter(function(a){return a.ProductSubType.indexOf("BASE")>
-1});var flightData=Bootstrapper.dataObject.page.selectedTrips;var marketsArray=[];var taxes=0;var markets=null;var sessionID=Bootstrapper.analytics.getSessionID("flightSearchSession");var getData=Bootstrapper.dataObject._getData;var today=Bootstrapper.analytics.getCurrentDateFormatted();var MPAccStatus=getData.call(window,"MPAccStatus","visitor","global");var MPAccNumber=getData.call(window,"MPAccNumber","visitor","global");var MPCustomerID=Bootstrapper.dataObject._getData("CustomerId","visitor",
"global");var transCurrency=getData.call(window,"currency","transaction","page");var transQty=getData.call(window,"qty","transaction","page");var transCabinType=getData.call(window,"cabinType","transaction","page");var transOrigin=getData.call(window,"orig1","transaction","page");var transTotalTaxes=UA&&UA.AppData&&UA.AppData.Data&&UA.AppData.Data.Cart&&UA.AppData.Data.Cart.TotalTaxes?parseFloat(UA.AppData.Data.Cart.TotalTaxes).toFixed(2):"";var transDestination=getData.call(window,"dest1","transaction",
"page");var transType=getData.call(window,"type","transaction","page");var transCost=getData.call(window,"cost","transaction","page");var transTravelDate=getData.call(window,"travelDate1","transaction","page");var transStayLength=getData.call(window,"stayLength","transaction","page");var transTripType=getData.call(window,"tripType","transaction","page");var satNightStay=getData.call(window,"satNightStay","flightSearch","page");var tripModel=getData.call(window,"tripModel","flightSearch","page");var pnr=
Bootstrapper.dataObject.page.transaction.PNR;var transReturnTravelDate=getData.call(window,"travelDate2","transaction","page");try{if(transTripType=="Round Trip"){var diffStay=getDateDiff(transTravelDate,transReturnTravelDate);if(diffStay>-1)transStayLength=diffStay}else transStayLength=getData.call(window,"stayLength","transaction","page")}catch(e){transStayLength=getData.call(window,"stayLength","transaction","page")}var retargetCookie=Bootstrapper.localS.utilities.__getData("retarget1");var fareClassesString=
"";$("div.flight-summary-bottom").each(function(){var start=$(this).find(".flight-station-origin").text().match(/[A-Z]{3,3}/),end=$(this).find(".flight-station-destination").text().match(/[A-Z]{3,3}/);var tempArray=[];tempArray.push(start[0],end[0]);tempArray=tempArray.join("-");marketsArray.push(tempArray)});if(transType.toLowerCase()=="award"){var fareClasses=[];var flightSegments=Bootstrapper.dataObject.page.flightSegments;for(var i=0;i<flightSegments.length;i++){var legs=flightSegments[i].legs;
for(var n=0;n<legs.length;n++)fareClasses.push(legs[n].fareClass)}fareClassesString=fareClasses.join("-")}var d=Bootstrapper._dateFormat(new Date,"yyyy-MM-dd");orderId=d+"|"+pnr;transOrigin=filterForAirpotCode(transOrigin);transDestination=filterForAirpotCode(transDestination);var transPurchaseCriteria=[transOrigin,transDestination,transTravelDate,transStayLength,transTripType,transQty,transCurrency,today,transReturnTravelDate];var awardPurchaseCriteria=[pnr+"-"+today,transQty,pnr,transCost,fareClassesString,
MPCustomerID,MPAccStatus];tranxData["dimension10"]=transCabinType;tranxData["dimension11"]=transType;tranxData["dimension12"]=transOrigin+"-"+transDestination;tranxData["dimension13"]=transTravelDate;tranxData["dimension14"]=satNightStay;tranxData["dimension15"]=tripModel;tranxData["dimension16"]=sessionID;tranxData["dimension17"]=Bootstrapper.analytics.getTimeStamp();tranxData["dimension19"]=transPurchaseCriteria.join("|");tranxData["dimension23"]=transTripType;tranxData["dimension69"]=orderId;tranxData["nonInteraction"]=
1;var sCurrency="",vMiles="MILES",vRevenue="revenue",vAward="award";function prepareLogForGapTracking(requirementName,tagName,errorLog,sourceObject,methodName){var customLabel={"requirement":requirementName,"tag_name":tagName,"exception":requirementName+" :: "+JSON.stringify(errorLog.message),"input_source":{"data_source":JSON.stringify(sourceObject)},"method_name":requirementName+" :: "+methodName};return customLabel}var calculateCurrency=function(){if(transData&&transData.currency)sCurrency=transData.currency;
else{sCurrency="";var customLabel=prepareLogForGapTracking("Set currency for Ticket Purchases Event Category in else of transData","Digital 2.0 - Booking Confirmation - UA",e,transData,"calculateCurrency");Bootstrapper.dataObject.dataGapTracking("web",customLabel,e)}if(sCurrency.toUpperCase()==vMiles)if(productsArray&&productsArray.length>0&&productsArray[0].Prices&&productsArray[0].Prices.length>1&&productsArray[0].Prices[1].Currency)sCurrency=productsArray[0].Prices[1].Currency;else{sCurrency="";
var customLabel=prepareLogForGapTracking("Set currency for Ticket Purchases Event Category while currency is MILES","Digital 2.0 - Booking Confirmation - UA",e,productsArray[0].Prices[1],"calculateCurrency");Bootstrapper.dataObject.dataGapTracking("web",customLabel,e)}};calculateCurrency();ga("set","\x26cu",sCurrency);var getProductCategory=function(){var productCategoryV="";if(Bootstrapper&&Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType){productCategoryV=
Bootstrapper.dataObject.page.pageType;if(productCategoryV==vRevenue)productCategoryV="Revenue Flight";else if(productCategoryV==vAward)productCategoryV="Award Flight"}return productCategoryV};var tagName="Digital 2.0 - Booking Confirmation - UA";var getProductType=function(productArray,requirementV){var productTypeV=Bootstrapper.dataObject.global.constant.doubleDash;var methodName="getProductType";if(productArray.ProductType)productTypeV=productArray.ProductType;else{var inputSource={"data_source":"productArray.ProductType",
"input_value":"undefined"};var error="Product Type data not found";var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,error,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error)}return productTypeV};var flightCabinType=function(productArray,requirementV){var methodName="flightCabinType";try{var productTypeV=getProductType(productArray,requirementV);var cabinTypeV=productTypeV;if(productTypeV.indexOf("ECONOMY")>
-1||productTypeV==="ECO-BASIC")cabinTypeV="Economy";else if(productTypeV.indexOf("BUSINESS")>-1)cabinTypeV="Business";else if(productTypeV.indexOf("FIRST")>-1)cabinTypeV="First"}catch(e){var inputSource={"data_source":"productArray","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}return cabinTypeV};
var localObject={miles:"MILES",isEmpty:function(str){return!str||0===str.length},checkMilesObject:function(requirementV,p){var methodName="checkMilesObject";try{if(productsArray&&productsArray[p]&&productsArray[p].Prices[0]&&productsArray[p].Prices[0].Currency&&productsArray[p].Prices[0].Currency==this.miles)return true;else return false}catch(e){var inputSource={"data_source":"productsArray[p].Prices[0].Currency","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,
tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}},getMilesPriceObject:function(requirementV,p){var methodName="getMilesPriceObject";try{if(productsArray&&productsArray[p]&&productsArray[p].Prices[0]&&productsArray[p].Prices[0].CostInLocalCurrency&&!this.isEmpty(productsArray[p].Prices[0].CostInLocalCurrency))return productsArray[p].Prices[0].CostInLocalCurrency;else return"--"}catch(e){var inputSource=
{"data_source":"productsArray[p].Prices[0].CostInLocalCurrency","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}}};if(transType.toLowerCase()==vRevenue||transType.toLowerCase()==vAward){var setupEventLabel=function setupEventLabel(productsArray,flightData,skus){var origin="";var destination="";var tripType=
"";var skuArray=[];var ddate="";var adate="";var dt="";var at="";var nStops="";var sCarrier="";var curFlight="";var prodDiv=null;var hasWifi="";var hasDirectTv="";var hasPower="";var ticketType=Bootstrapper&&Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType?Bootstrapper.dataObject.page.pageType:Bootstrapper.dataObject.global.constant.doubleDash;var price="";var currencyCode="";var legNumber="";var daystoDeparture="";var intlDomestic="";var flightNumber="";
var cabinType="";var flightDuration="";var priceModel="";var requirementV="Ticket Purchase event label fixes";var methodName="setupEventLabel";try{for(p in productsArray){skuArray=skus[p].split("-");origin=skuArray[0].substring(0,3);destination=skuArray[0].substring(3,6);ddate=skuArray[1];adate=skuArray[3];dt=skuArray[2];at=skuArray[3];nStops=flightData[p].Flights&&flightData[p].Flights[0]&&flightData[p].Flights[0].Connections&&flightData[p].Flights[0].Connections.length?flightData[p].Flights[0].Connections.length:
0;tripType=Bootstrapper.dataObject.page.flightSearch.tripType;cabinType=flightCabinType(productsArray[p],requirementV);price=parseFloat(productsArray[p].Prices[0].CostInLocalCurrency)-parseFloat(productsArray[p].Prices[1].CostInLocalCurrency);if(localObject.checkMilesObject(requirementV,p))price=localObject.getMilesPriceObject(requirementV,p);uniqueCarrier=flightData[p].Flights[0].FlightOperator;prodDiv=$("#trip-detail-"+(parseInt(p)+1).toString());hasWifi=prodDiv.find(".icon-wifi").length?"Y":"N";
hasDirectTv=prodDiv.find(".icon-directtv").length?"Y":"N";hasPower=prodDiv.find(".icon-power").length?"Y":"N";var geoInfo=createODInfo(prodDiv,requirementV);intlDomestic=getFlightType(geoInfo,requirementV);legNumber=parseInt(p)+1;priceModel=productsArray[p].ProductType;var oneDay=24*60*60*1E3;var firstDate=new Date(flightData[p].DepartDate);var secondDate=new Date;daystoDeparture=Math.round(Math.abs((firstDate.getTime()-secondDate.getTime())/oneDay));var isBusiness=productsArray[p].ProductType.indexOf("BUSINESS")||
productsArray[p].ProductType.indexOf("FIRST")?"Y":"N";sCarrier=segmentCarriers[p];flightNumber=flightData[p].Flights[0].FlightNumber;if(flightData[p]&&flightData[p].Flights[0]&&flightData[p].Flights[0].Connections){var connectionsArray=flightData[p].Flights[0].Connections;for(conn in connectionsArray)if(connectionsArray[conn].FlightNumber)flightNumber+="-"+connectionsArray[conn].FlightNumber}flightDuration=flightData[p].Flights[0].Duration;if(parseInt(p)==0)window._pEventLabelData+=p+"|"+[origin,
destination,ticketType,ddate,tripType,cabinType,intlDomestic,flightNumber,dt,at,nStops,flightDuration,hasWifi,hasDirectTv,hasPower,priceModel,price,transCurrency,legNumber,daystoDeparture,isBusiness].join("|");else window._pEventLabelData+="|"+p+"|"+[origin,destination,ticketType,ddate,tripType,cabinType,intlDomestic,flightNumber,dt,at,nStops,flightDuration,hasWifi,hasDirectTv,hasPower,priceModel,price,transCurrency,legNumber,daystoDeparture,isBusiness].join("|")}}catch(e){var inputSource={"data_source":"unexpected values in recived arguments",
"input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}};var flightNumArray=Bootstrapper.localS.utilities.__getData("flightNumArray")||"";if(flightNumArray)flightNumArray=JSON.parse(flightNumArray);else flightNumArray={};var flightNumObjArray=[];for(i in flightNumArray)flightNumObjArray.push(i);var formatProductCheckout=
function formatProductCheckout(flightData){try{var revenue=null;var skus=[];var affiliate=[];var variant="";for(var i=0;i<flightData.length;i++){affiliate.push(flightData[i].Flights[0].FlightOperator);skus.push(Bootstrapper.eCommerce.utilities.createSku(flightData,i))}var d94Value="--";var pCurrency="";var calculatePrice=function(productArray){try{try{pCurrency=productArray.Prices[0].Currency}catch(e){pCurrency=""}if(productArray.Prices[0].Currency=="MILES"){d94Value=parseFloat(productArray.Prices[0].CostInLocalCurrency);
taxesAndFees=parseFloat(productArray.Prices[1].CostInLocalCurrency);try{pCurrency=productArray.Prices[1].Currency}catch(e){pCurrency=""}return taxesAndFees}return parseFloat(productArray.Prices[0].CostInLocalCurrency)}catch(e){var customLabel={"requirement":"Send Award Miles in Dimension 94","tag_name":"Digital 2.0 - Booking Confirmation - UA","exception":"Booking Confirmation: "+JSON.stringify(e.message),"input_source":{"Bootstrapper_source":JSON.stringify(productArray.Prices)},"method_name":"calculatePrice"};
Bootstrapper.dataObject.dataGapTracking("web",customLabel,e)}};var formattedProducts=[];for(s in skus){var product={"name":marketsArray[s],"category":getProductCategory(),"brand":productsArray[s].ProductType,"id":skus[s],"coupon":"","affiliate":affiliate[s],"variant":UA.AppData.Data.Selected.Trips[s].Flights[0].CabinType!=="Coach"?UA.AppData.Data.Selected.Trips[s].Flights[0].CabinType:"Economy","price":calculatePrice(productsArray[s]),"currency":pCurrency||"","quantity":Bootstrapper.dataObject.page.flightSearch&&
Bootstrapper.dataObject.page.flightSearch.paxCount?Bootstrapper.dataObject.page.flightSearch.paxCount:1,"dimension92":flightNumArray[flightNumObjArray[s]],"dimension94":d94Value};d94Value="--";pCurrency="";taxes+=parseFloat(productsArray[s].Prices[1].CostInLocalCurrency);formattedProducts.push(product)}setupEventLabel(productsArray,flightData,skus);return formattedProducts}catch(e){Bootstrapper.reportException({message:"Could not generate the product codes"})}};var advancedEcommProducts=formatProductCheckout(flightData);
for(var e in advancedEcommProducts)ga("ec:addProduct",advancedEcommProducts[e]);taxes=transTotalTaxes;ga("ec:setAction",action,{"id":transData.PNR,"affiliation":"","revenue":(transData.cost-taxes).toFixed(2),"tax":taxes,"shipping":"","coupon":""});if(retargetCookie&&retargetCookie.length>0){tranxData["dimension26"]=retargetCookie;Bootstrapper.localS.utilities.__clearData("retarget1")}tranxData["metric2"]=1;if(transType.toLowerCase()==vRevenue){tranxData["dimension29"]=Bootstrapper.dataObject.getData("CustomerId",
"visitor","global")+"|"+Bootstrapper.base64Encode(Bootstrapper.dataObject.getData("confEmailAddr","transaction","page"))+"|"+Bootstrapper.dataObject._getData("PNR","transaction","page")+"|"+"D2.0";tranxData["metric3"]=1;tranxData["dimension9"]=transCurrency}else tranxData["metric4"]=1}else;ga("send","event","Ticket Purchases",transType,window._pEventLabelData,tranxData)}catch(e){Bootstrapper.reportException(e)}}siteReady(false,function(){runDeployment()});function filterForAirpotCode(airpotInfoString){var airpotCodeString=
airpotInfoString;try{if(airpotInfoString&&airpotInfoString.length>3)airpotCodeString=airpotInfoString.match(/\((\w{3})/)[1]}catch(e){airpotCodeString=airpotInfoString}return airpotCodeString}function getDateDiff(time1,time2){var str1=time1.split("-");var str2=time2.split("-");var t1=new Date(str1[2],str1[0]-1,str1[1]);var t2=new Date(str2[2],str2[0]-1,str2[1]);var diffMS=t1-t2;var diffS=diffMS/1E3;var diffM=diffS/60;var diffH=diffM/60;var diffD=diffH/24;return Math.round(Math.abs(diffD))}function getFlightType(geoInfo,
requirementV){var flightType=Bootstrapper.dataObject.global.constant.doubleDash;var methodName="getFlightType";try{var domestic=geoInfo.every(function checkDomesticByCountryName(geoObj){var originDomestic=checkCountryDomestic(USA_LANGUAGE_VERSIONS,geoObj.origin_country_name);var destinationDomestic=checkCountryDomestic(USA_LANGUAGE_VERSIONS,geoObj.destination_country_name);return originDomestic&&destinationDomestic});if(domestic)flightType=LOCAL_VARIABLES.DOMESTIC;else flightType=LOCAL_VARIABLES.INTERNATIONAL}catch(e){var inputSource=
{"data_source":"geoObj","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}return flightType}function checkCountryDomestic(countryVersions,countryName){if(countryVersions.length>0)return countryVersions.some(function checkCountryLanguageVariation(variation){return variation===countryName})}function createODInfo(prodDiv,
requirementV){var methodName="createODInfo";var geoInfo=[];try{var flightOrigin=prodDiv.find(".flight-station-origin").text()?prodDiv.find(".flight-station-origin").text():Bootstrapper.dataObject.global.constant.doubleDash;var flightDestination=prodDiv.find(".flight-station-destination").text()?prodDiv.find(".flight-station-destination").text():Bootstrapper.dataObject.global.constant.doubleDash;if(Bootstrapper&&typeof Bootstrapper.decodedODData=="function"){var originCountry=getCountryName(Bootstrapper.decodedODData(flightOrigin));
var destinationCountry=getCountryName(Bootstrapper.decodedODData(flightDestination));geoInfo.push({"origin_country_name":originCountry,"destination_country_name":destinationCountry})}}catch(e){var inputSource={"data_source":"DOM trip-detail div","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}return geoInfo}
function getCountryName(object){var methodName="getCountryName";var country=Bootstrapper.dataObject.global.constant.doubleDash;try{country=object.country?object.country:Bootstrapper.dataObject.global.constant.doubleDash}catch(e){var inputSource={"data_source":"Origin/Destination data object","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,
customLabel,e.message)}return country}},2260716,[2011281,1933905],288208,[248942,288194]);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){var pos=Bootstrapper.dataObject.getData("POS","locale","global");var posList={US:!0,AU:!0,GB:!0,NZ:!0,CN:!0};if(posList[pos]){var ftURL="https://fdz.flashtalking.com/services/united/FBI977_dynamic_pixel/segment.php?U5\x3dConversion";var segments=Bootstrapper.dataObject.page.flightSegments;var sCount=segments.length;var firstSegment=segments[0];
var finalDestSegment;var transactionCurrency=Bootstrapper.dataObject.getData("currency","transaction","page");var transactionCost=Bootstrapper.dataObject.getData("cost","transaction","page");var nQty=Bootstrapper.dataObject.getData("qty","transaction","page");var transactionId=Bootstrapper.dataObject.getData("travelDate1","transaction","page")+"-"+Bootstrapper.base64Encode(Bootstrapper.dataObject.getData("PNR","transaction","page"));if(sCount>1&&segments[0].origAirport===segments[sCount-1].destAirport){finalDestSegment=
segments[sCount-2];fs=sCount-2}else{finalDestSegment=segments[sCount-1];fs=sCount-1}var origFT=firstSegment.legs[0].origAirport;var destFT=finalDestSegment.legs[finalDestSegment.legs.length-1].destAirport;ftURL+="\x26U1\x3d"+origFT;ftURL+="\x26U2\x3d"+destFT;ftURL+="\x26U3\x3d"+transactionCurrency;ftURL+="\x26U4\x3d"+transactionCost;ftURL+="\x26ftXRef\x3d"+transactionId;ftURL+="\x26ftXValue\x3d"+transactionCost;ftURL+="\x26ftxNumItems\x3d"+nQty;Bootstrapper.imageRequest(ftURL)}}if(Bootstrapper.dataObject&&
Bootstrapper.dataObject.dataLayerLoaded)runDeployment();else $(window).on("dataLayerLoaded",function(){runDeployment()})},1883863,[2011281],382983,[248942]);
Bootstrapper.bindDependencyDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function responsysConf(){if(Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSearch&&Bootstrapper.dataObject.page.transaction){if(Bootstrapper.dataObject.getData("POS","locale","global")==="US"){var OrderID=encodeURIComponent(Bootstrapper.base64Encode(Bootstrapper.dataObject._getData("PNR","transaction","page"))),OrderTotal=
encodeURIComponent(Bootstrapper.dataObject.getData("cost","transaction","page")),NumItem=encodeURIComponent(Bootstrapper.dataObject.getData("qty","transaction","page")),Onepass_Number=encodeURIComponent(Bootstrapper.base64Encode(Bootstrapper.dataObject.getData("CustomerId","visitor","global"))),ORIG_AIRPORT_CODE=encodeURIComponent(Bootstrapper.dataObject.getData("orig1","flightSearch","page")),DEST_AIRPORT_CODE=encodeURIComponent(Bootstrapper.dataObject.getData("dest1","flightSearch","page")),DEPARTURE_DATE=
encodeURIComponent(Bootstrapper.dataObject.getData("travelDate1ISO","flightSearch","page")),RETURN_DATE=encodeURIComponent(Bootstrapper.dataObject.getData("travelDate2ISO","flightSearch","page")),PRODUCT_CODE="FLT",ATTRIB_TYPE="",DEST_CITY_NAME="",ORIG_CITY_NAME="",sif_protocol="https://",sif_domain="news.united.com",sif_pathname="/servlet/cct",sif_search="?_a_\x3dJH"+"\x26_c_\x3dLATEST"+"\x26action\x3donce"+"\x26OrderID\x3d"+OrderID+"\x26OrderTotal\x3d"+OrderTotal+"\x26NumItem\x3d"+NumItem+"\x26Onepass_Number\x3d"+
Onepass_Number+"\x26ORIG_AIRPORT_CODE\x3d"+ORIG_AIRPORT_CODE+"\x26ORIG_CITY_NAME ORIG\x3d"+ORIG_CITY_NAME+"\x26DEST_AIRPORT_CODE\x3d"+DEST_AIRPORT_CODE+"\x26DEST_CITY_NAME\x3d"+DEST_CITY_NAME+"\x26DEPARTURE_DATE\x3d"+DEPARTURE_DATE+"\x26RETURN_DATE\x3d"+RETURN_DATE+"\x26PRODUCT_CODE\x3d"+PRODUCT_CODE+"\x26ATTRIB_TYPE\x3d"+ATTRIB_TYPE;Bootstrapper.safeInsertIframe(sif_protocol+sif_domain+sif_pathname+sif_search)}}else setTimeout(responsysConf,500)}responsysConf()},1419332,[2011281],202736,[248942]);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;function runDeployment(){if(Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType&&Bootstrapper.dataObject.page.pageType.toLowerCase()==="revenue"){var pos=Bootstrapper.dataObject.getData("POS","locale","global"),posList={NZ:!0};if(posList[pos]){var flt_date=Bootstrapper.dataObject.page.flightSearch.travelDate1;var pax=Bootstrapper.dataObject.page.flightSearch.paxCount;
var url1="https://ad.atdmt.com/m/img;m\x3d11042215813792;cache\x3d?tag\x3d11042215813795\x26amp;flt_date\x3d"+flt_date+"\x26pax\x3d"+pax;Bootstrapper.imageRequest(url1)}}}var loop=0;function jQueryflag(){if(loop<=30)setTimeout(function(){if(Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.flightSearch&&Bootstrapper.dataObject.page.flightSearch.orig1!=="--")runDeployment();else{loop=loop+1;jQueryflag()}},350);else return}jQueryflag()},1784737,[2011281],456212,[248942]);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var TAG_NAME="Digital 2.0 - Cyber Monday - Booking Confirmation Page";var USA_LANGUAGE_VERSIONS=["US","EE. UU.","EUA"];var LOCAL_VARIABLES={DOMESTIC:"Domestic",INTERNATIONAL:"International"};function runDeployment(){try{window._pEventLabelData="";var segmentCarriers=[];var transData=Bootstrapper.dataObject.page.transaction;var productsArray=Bootstrapper.dataObject.page.productsInCart.filter(function(a){return a.ProductSubType.indexOf("BASE")>
-1});var flightData=Bootstrapper.dataObject.page.selectedTrips;var marketsArray=[];var taxes=0;var markets=null;var getData=Bootstrapper.dataObject._getData;var MPCustomerID=Bootstrapper.dataObject._getData("CustomerId","visitor","global");var rtiCurrency=UA&&UA.AppData&&UA.AppData.Data&&UA.AppData.Data.Cart&&UA.AppData.Data.Cart.Currency?UA.AppData.Data.Cart.Currency:"--";var transCurrency=getData.call(window,"currency","transaction","page");var transQty=getData.call(window,"qty","transaction","page");
var transTotalTaxes=UA&&UA.AppData&&UA.AppData.Data&&UA.AppData.Data.Cart&&UA.AppData.Data.Cart.TotalTaxes?parseFloat(UA.AppData.Data.Cart.TotalTaxes).toFixed(2):"";var transDestination=getData.call(window,"dest1","transaction","page");var transType=getData.call(window,"type","transaction","page");var transCost=getData.call(window,"cost","transaction","page");var transTravelDate=getData.call(window,"travelDate1","transaction","page");var transStayLength=getData.call(window,"stayLength","transaction",
"page");var transTripType=getData.call(window,"tripType","transaction","page");var satNightStay=getData.call(window,"satNightStay","flightSearch","page");var tripModel=getData.call(window,"tripModel","flightSearch","page");var pnr=Bootstrapper.dataObject.page.transaction.PNR;var fareMiles=Bootstrapper.dataObject.page.flightSegments.fareMiles;var transReturnTravelDate=getData.call(window,"travelDate2","transaction","page");try{if(transTripType=="Round Trip"){var diffStay=getDateDiff(transTravelDate,
transReturnTravelDate);if(diffStay>-1)transStayLength=diffStay}else transStayLength=getData.call(window,"stayLength","transaction","page")}catch(e){transStayLength=getData.call(window,"stayLength","transaction","page")}var retargetCookie=Bootstrapper.localS.utilities.__getData("retarget1");var fareClassesString="";$("div.flight-summary-bottom").each(function(){var start=$(this).find(".flight-station-origin").text().match(/[A-Z]{3,3}/),end=$(this).find(".flight-station-destination").text().match(/[A-Z]{3,3}/);
var tempArray=[];tempArray.push(start[0],end[0]);tempArray=tempArray.join("-");marketsArray.push(tempArray)});if(transType.toLowerCase()=="award"){var fareClasses=[];var flightSegments=Bootstrapper.dataObject.page.flightSegments;for(var i=0;i<flightSegments.length;i++){var legs=flightSegments[i].legs;for(var n=0;n<legs.length;n++)fareClasses.push(legs[n].fareClass)}fareClassesString=fareClasses.join("-")}var sCurrency="",vMiles="MILES",vRevenue="revenue",vAward="award";function prepareLogForGapTracking(requirementName,
tagName,errorLog,sourceObject,methodName){var customLabel={"requirement":requirementName,"tag_name":tagName,"exception":requirementName+" :: "+JSON.stringify(errorLog.message),"input_source":{"data_source":JSON.stringify(sourceObject)},"method_name":requirementName+" :: "+methodName};return customLabel}var calculateCurrency=function(){if(transData&&transData.currency)sCurrency=transData.currency;else{sCurrency="";var customLabel=prepareLogForGapTracking("Set currency for Cyber Monday ",TAG_NAME,e,
transData,"calculateCurrency");Bootstrapper.dataObject.dataGapTracking("web",customLabel,e)}if(sCurrency.toUpperCase()==vMiles)if(productsArray&&productsArray.length>0&&productsArray[0].Prices&&productsArray[0].Prices.length>1&&productsArray[0].Prices[1].Currency)sCurrency=productsArray[0].Prices[1].Currency;else{sCurrency="";var customLabel=prepareLogForGapTracking("Set currency for Cyber monday",TAG_NAME,e,productsArray[0].Prices[1],"calculateCurrency");Bootstrapper.dataObject.dataGapTracking("web",
customLabel,e)}};calculateCurrency();var getProductCategory=function(){var productCategoryV="";if(Bootstrapper&&Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType){productCategoryV=Bootstrapper.dataObject.page.pageType;if(productCategoryV==vRevenue)productCategoryV="Revenue Flight";else if(productCategoryV==vAward)productCategoryV="Award Flight"}return productCategoryV};var tagName="Digital 2.0 - Cyber Monday - Booking Confirmation Page";var getProductType=
function(productArray,requirementV){var productTypeV=Bootstrapper.dataObject.global.constant.doubleDash;var methodName="getProductType";if(productArray.ProductType)productTypeV=productArray.ProductType;else{var inputSource={"data_source":"productArray.ProductType","input_value":"undefined"};var error="Product Type data not found";var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,error,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,
customLabel,error)}return productTypeV};var flightCabinType=function(productArray,requirementV){var methodName="flightCabinType";try{var productTypeV=getProductType(productArray,requirementV);var cabinTypeV=productTypeV;if(productTypeV.indexOf("ECONOMY")>-1||productTypeV==="ECO-BASIC")cabinTypeV="Economy";else if(productTypeV.indexOf("BUSINESS")>-1)cabinTypeV="Business";else if(productTypeV.indexOf("FIRST")>-1)cabinTypeV="First"}catch(e){var inputSource={"data_source":"productArray","input_value":"undefined"};
var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}return cabinTypeV};var localObject={miles:"MILES",isEmpty:function(str){return!str||0===str.length},checkMilesObject:function(requirementV){var methodName="checkMilesObject";try{if(productsArray&&productsArray[p]&&productsArray[p].Prices[0]&&productsArray[p].Prices[0].Currency&&
productsArray[p].Prices[0].Currency==this.miles)return true;else return false}catch(e){var inputSource={"data_source":"productsArray[p].Prices[0].Currency","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}},getMilesPriceObject:function(requirementV,p){var methodName="getMilesPriceObject";try{if(productsArray&&
productsArray[p]&&productsArray[p].Prices[0]&&productsArray[p].Prices[0].CostInLocalCurrency&&!this.isEmpty(productsArray[p].Prices[0].CostInLocalCurrency))return productsArray[p].Prices[0].CostInLocalCurrency;else return"--"}catch(e){var inputSource={"data_source":"productsArray[0].Prices[0].CostInLocalCurrency","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,
customLabel,e.message)}}};if(transType.toLowerCase()=="award"){var departureDate="",arrivaleDate="",isValidDate=false,isValidTripType=false,isEconomyCabinType=false,isAwardTravel=false,isValidDestinationArrival=false;var minimumRequiredDate=new Date("2018-01-07");var maxRequiredDate=new Date("2018-03-10");var setupEventLabel=function setupEventLabel(productsArray,flightData,skus){var origin="";var destination="";var tripType="";var skuArray=[];var ddate="";var adate="";var dt="";var at="";var nStops=
"";var sCarrier="";var curFlight="";var prodDiv=null;var hasWifi="";var hasDirectTv="";var hasPower="";var ticketType=Bootstrapper&&Bootstrapper.dataObject&&Bootstrapper.dataObject.page&&Bootstrapper.dataObject.page.pageType?Bootstrapper.dataObject.page.pageType:Bootstrapper.dataObject.global.constant.doubleDash;var price="";var currencyCode="";var legNumber="";var daystoDeparture="";var intlDomestic="";var flightNumber="";var cabinType="";var flightDuration="";var priceModel="";var requirementV=
"Cyber Monday event label";var methodName="setupEventLabel";try{for(p in productsArray){skuArray=skus[p].split("-");origin=skuArray[0].substring(0,3);destination=skuArray[0].substring(3,6);ddate=skuArray[1];adate=skuArray[3];dt=skuArray[2];at=skuArray[3];nStops=flightData[p].Flights&&flightData[p].Flights[0]&&flightData[p].Flights[0].Connections&&flightData[p].Flights[0].Connections.length?flightData[p].Flights[0].Connections.length:0;tripType=Bootstrapper.dataObject.page.flightSearch.tripType;cabinType=
flightCabinType(productsArray[p],requirementV);price=parseFloat(productsArray[p].Prices[0].CostInLocalCurrency)-parseFloat(productsArray[p].Prices[1].CostInLocalCurrency);if(departureDate)arrivaleDate=dateParse(ddate);else departureDate=dateParse(ddate);isValidTripType=tripType.toUpperCase()==="ROUND TRIP";isEconomyCabinType=cabinType.toUpperCase()=="ECONOMY";isAwardTravel=ticketType.toUpperCase()=="AWARD";if(localObject.checkMilesObject(requirementV))price=localObject.getMilesPriceObject(requirementV,
p);uniqueCarrier=flightData[p].Flights[0].FlightOperator;prodDiv=$("#trip-detail-"+(parseInt(p)+1).toString());var geoInfo=createODInfo(prodDiv,requirementV);intlDomestic=getFlightType(geoInfo,requirementV);legNumber=parseInt(p)+1;priceModel=productsArray[p].ProductType;isValidDestinationArrival=(isHawaiiAirport(origin)&&!isHawaiiAirport(destination)||isHawaiiAirport(destination)&&!isHawaiiAirport(origin))&&intlDomestic==LOCAL_VARIABLES.DOMESTIC;var oneDay=24*60*60*1E3;var firstDate=new Date(flightData[p].DepartDate);
var secondDate=new Date;daystoDeparture=Math.round(Math.abs((firstDate.getTime()-secondDate.getTime())/oneDay));sCarrier=segmentCarriers[p];flightNumber=flightData[p].Flights[0].FlightNumber;if(flightData[p]&&flightData[p].Flights[0]&&flightData[p].Flights[0].Connections){var connectionsArray=flightData[p].Flights[0].Connections;for(conn in connectionsArray)if(connectionsArray[conn].FlightNumber)flightNumber+="-"+connectionsArray[conn].FlightNumber}flightDuration=flightData[p].Flights[0].Duration;
if(parseInt(p)==0)window._pEventLabelData+=p+"|"+[origin,destination,ddate,price,rtiCurrency,MPCustomerID].join("|");else window._pEventLabelData+="|"+p+"|"+[origin,destination,ddate,price,rtiCurrency,pnr,fareMiles].join("|")}if(!isValidDate)isValidDate=departureDate.getTime()>=minimumRequiredDate.getTime()&&arrivaleDate.getTime()<=maxRequiredDate.getTime();var isExistingPNR=localStorage.getItem("pnr")&&localStorage.getItem("pnr")==pnr;if(!isExistingPNR&&isValidDate&&isValidTripType&&isEconomyCabinType&&
isAwardTravel&&isValidDestinationArrival){ga("send","event","Cyber Monday: MP Saver Awards to Hawaii","Miles Redeemed",window._pEventLabelData);localStorage.setItem("pnr",pnr)}}catch(e){var inputSource={"data_source":"unexpected values in recived arguments","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,tagName,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}};
var formatProductCheckout=function formatProductCheckout(flightData){try{var revenue=null;var skus=[];var affiliate=[];var variant="";for(var i=0;i<flightData.length;i++){affiliate.push(flightData[i].Flights[0].FlightOperator);skus.push(Bootstrapper.eCommerce.utilities.createSku(flightData,i))}var d94Value="--";var pCurrency="";var calculatePrice=function(productArray){try{try{pCurrency=productArray.Prices[0].Currency}catch(e){pCurrency=""}if(productArray.Prices[0].Currency=="MILES"){d94Value=parseFloat(productArray.Prices[0].CostInLocalCurrency);
taxesAndFees=parseFloat(productArray.Prices[1].CostInLocalCurrency);try{pCurrency=productArray.Prices[1].Currency}catch(e){pCurrency=""}return taxesAndFees}return parseFloat(productArray.Prices[0].CostInLocalCurrency)}catch(e){var customLabel={"requirement":"Cyber Monday event label","tag_name":"Digital 2.0 - Cyber Monday - Booking Confirmation Page ","exception":"Booking Confirmation: "+JSON.stringify(e.message),"input_source":{"Bootstrapper_source":JSON.stringify(productArray.Prices)},"method_name":"calculatePrice"};
Bootstrapper.dataObject.dataGapTracking("web",customLabel,e)}};var formattedProducts=[];for(s in skus){var product={"name":marketsArray[s],"category":getProductCategory(),"brand":productsArray[s].ProductType,"id":skus[s],"coupon":"","affiliate":affiliate[s],"variant":UA.AppData.Data.Selected.Trips[s].Flights[0].CabinType!=="Coach"?UA.AppData.Data.Selected.Trips[s].Flights[0].CabinType:"Economy","price":calculatePrice(productsArray[s]),"currency":pCurrency||"","quantity":Bootstrapper.dataObject.page.flightSearch&&
Bootstrapper.dataObject.page.flightSearch.paxCount?Bootstrapper.dataObject.page.flightSearch.paxCount:1};d94Value="--";pCurrency="";taxes+=parseFloat(productsArray[s].Prices[1].CostInLocalCurrency);formattedProducts.push(product)}setupEventLabel(productsArray,flightData,skus);return formattedProducts}catch(e){Bootstrapper.reportException({message:"Could not generate the product codes"})}};var advancedEcommProducts=formatProductCheckout(flightData)}else;}catch(e){Bootstrapper.reportException(e)}}siteReady(false,
function(){runDeployment()});function filterForAirpotCode(airpotInfoString){var airpotCodeString=airpotInfoString;try{if(airpotInfoString&&airpotInfoString.length>3)airpotCodeString=airpotInfoString.match(/\((\w{3})/)[1]}catch(e){airpotCodeString=airpotInfoString}return airpotCodeString}function getDateDiff(time1,time2){var str1=time1.split("-");var str2=time2.split("-");var t1=new Date(str1[2],str1[0]-1,str1[1]);var t2=new Date(str2[2],str2[0]-1,str2[1]);var diffMS=t1-t2;var diffS=diffMS/1E3;var diffM=
diffS/60;var diffH=diffM/60;var diffD=diffH/24;return Math.round(Math.abs(diffD))}function dateParse(str){if(!/^(\d){8}$/.test(str))return"invalid date";var y=str.substr(0,4),m=str.substr(4,2),d=str.substr(6,2);return new Date(y+"-"+m+"-"+d)}function isHawaiiAirport(airportCode){var methodName="isHawaiiAirport",requitementName="cyber monday";try{if(airportCode=="HNL"||airportCode=="OGG"||airportCode=="LIH"||airportCode=="KOA"||airportCode=="ITO")return true}catch(e){var inputSource={"data_source":"airportCode",
"input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requitementName,TAG_NAME,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}}function getFlightType(geoInfo,requirementV){var flightType=Bootstrapper.dataObject.global.constant.doubleDash;var methodName="getFlightType";try{var domestic=geoInfo.every(function checkDomesticByCountryName(geoObj){var originDomestic=checkCountryDomestic(USA_LANGUAGE_VERSIONS,
geoObj.origin_country_name);var destinationDomestic=checkCountryDomestic(USA_LANGUAGE_VERSIONS,geoObj.destination_country_name);return originDomestic&&destinationDomestic});if(domestic)flightType=LOCAL_VARIABLES.DOMESTIC;else flightType=LOCAL_VARIABLES.INTERNATIONAL}catch(e){var inputSource={"data_source":"geoObj","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,TAG_NAME,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,
customLabel,e.message)}return flightType}function checkCountryDomestic(countryVersions,countryName){if(countryVersions.length>0)return countryVersions.some(function checkCountryLanguageVariation(variation){return variation===countryName})}function createODInfo(prodDiv,requirementV){var methodName="createODInfo";var geoInfo=[];try{var flightOrigin=prodDiv.find(".flight-station-origin").text()?prodDiv.find(".flight-station-origin").text():Bootstrapper.dataObject.global.constant.doubleDash;var flightDestination=
prodDiv.find(".flight-station-destination").text()?prodDiv.find(".flight-station-destination").text():Bootstrapper.dataObject.global.constant.doubleDash;if(Bootstrapper&&typeof Bootstrapper.decodedODData=="function"){var originCountry=getCountryName(Bootstrapper.decodedODData(flightOrigin));var destinationCountry=getCountryName(Bootstrapper.decodedODData(flightDestination));geoInfo.push({"origin_country_name":originCountry,"destination_country_name":destinationCountry})}}catch(e){var inputSource=
{"data_source":"DOM trip-detail div","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,TAG_NAME,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}return geoInfo}function getCountryName(object){var methodName="getCountryName";var country=Bootstrapper.dataObject.global.constant.doubleDash;try{country=object.country?object.country:Bootstrapper.dataObject.global.constant.doubleDash}catch(e){var inputSource=
{"data_source":"Origin/Destination data object","input_value":"undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementV,TAG_NAME,e.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e.message)}return country}},2249767,[2011281,2203007,1933905],511923,[248942,269644,288194]);
Bootstrapper.bindDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;var CONST_TAGNAME="Digital 2.0 - Amobee/Turn pixel - FSR \x26 Booking Confirmation Page",CONST_AMOBEE_URL="https://r.turn.com/r/beacon?",b2FSR="E8kFqlNML8NtGnBrBLbJPxKyeZ2W0BC3Gh5c7syfXwimQX5cinwqmYDHXD5dldoy9dyEHnjj3OqfXeghxAe-xA",b2Booking="EwElL0m9d65ddx7RlCDM0HRRsmtUic-lcMQ8wCZMaTymQX5cinwqmYDHXD5dldoyimjKzGS_WIMYHvpzIdCzcQ",cid="",bprice="";(function sendAmobeePixel(){var methodName=
"sendAmobeePixel";try{var loc=window.location,pth=loc.pathname.toLowerCase(),qry=loc.search,srchRsltRevAwdPatern=new RegExp(/\/ual\/[^\/]+\/[^\/]+\/flight-search\/book-a-flight\/results\/(rev|awd)/),confirmRevAwdPatern=new RegExp(/\/ual\/[^\/]+\/[^\/]+\/flight-search\/book-a-flight\/confirmation\/(rev|awd)/);if(pth.match(srchRsltRevAwdPatern))CONST_AMOBEE_URL+="b2\x3d"+b2FSR+"\x26cid\x3d"+cid;else if(pth.match(confirmRevAwdPatern))CONST_AMOBEE_URL+="b2\x3d"+b2Booking+"\x26cid\x3d"+cid+"\x26bprice\x3d"+
bprice;if((jQuery||$)&&!jQuery("body").hasClass("Error"))Bootstrapper.imageRequest(CONST_AMOBEE_URL)}catch(error){var requirement="Amobee pixel call on FSR and Booking confirmation page";var inputSource={dataSource:"Bootstrapper.imageRequest",inputValue:"Undefined"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirement,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error)}})()},
2253894,475720);